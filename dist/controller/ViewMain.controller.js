sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/Button","sap/m/Dialog","sap/ui/core/Fragment","sap/ui/core/library","sap/m/library","sap/m/Text","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,a,i,o,r,s,n,u){"use strict";return e.extend("zatualizacaocadastral.controller.ViewMain",{onInit:function(){var e;var t=this;e=sap.ui.getCore().getMessageManager();this.getView().setModel(e.getMessageModel(),"message");e.registerObject(this.getView(),true);t.executeODataRead()},executeODataRead:function(){var e=this.getView().getModel();var t=sap.ui.getCore().byId("busy")?sap.ui.getCore().byId("busy"):new sap.m.BusyDialog("busy",{text:"Carregando",title:"Carregando"});e.attachRequestSent(function(){t.open()});e.read("/headerSet('99999999')",{urlParameters:{$expand:"documentoSet,dependenteSet"},success:jQuery.proxy(function(e,t){var a=t.headers["sap-message"];var i=JSON.parse(a);console.log(i);console.log(i.message);this.bindData(t)},this),error:function(e){alert("Failure - OData Service could not be called. Please check the Network Tab at Debug.")}});e.attachRequestCompleted(function(){t.close()})},bindData:function(e){this.bindHeader(e)},bindHeader:function(e){this.getView().byId("inputNome").setValue(e.data.NomeColaborador);this.getView().byId("inputTelefoneCelular").setValue(e.data.TelefoneCelular);this.getView().byId("inputTelefoneContato").setValue(e.data.TelefoneContato);this.getView().byId("inputCelularCorporativo").setValue(e.data.CelularCorporativo);this.getView().byId("inputEmailParticular").setValue(e.data.EmailParticular);this.getView().byId("inputEmailCorporativo").setValue(e.data.EmailCorporativo);this.getView().byId("inputRua").setValue(e.data.Rua);this.getView().byId("inputNumero").setValue(e.data.Numero);this.getView().byId("inputBairro").setValue(e.data.Bairro);this.getView().byId("inputComplemento").setValue(e.data.Complemento);this.getView().byId("inputCidade").setValue(e.data.Cidade);this.getView().byId("inputCep").setValue(e.data.Cep);this.getView().byId("inputEstado").setValue(e.data.Estado);this.getView().byId("inputPais").setValue(e.data.Pais)},onActionSave:function(){var e=this;var t=this.getView().getModel();var a={};var i=[];var o=[];var r=[];a=e.getHeaderDataFromScreen();a.documentoSet=i;a.dependenteSet=o;a.escolaridadeSet=r;e.executeOdataCreate(a)},executeOdataCreate:function(e){var t=this.getView().getModel();var a=sap.ui.getCore().byId("busy")?sap.ui.getCore().byId("busy"):new sap.m.BusyDialog("busy",{text:"Carregando",title:"Carregando"});t.attachRequestSent(function(){a.open()});t.create("/headerSet",e,{success:jQuery.proxy(function(e,t){var a=t.headers["sap-message"];var i=JSON.parse(a);console.log(i);console.log(i.message);this.bindData(t)},this),error:function(e){alert("Failure - OData Service could not be called. Please check the Network Tab at Debug.")}});t.attachRequestCompleted(function(){a.close()})},getHeaderDataFromScreen:function(){var e={};e.NomeColaborador=this.getView().byId("inputNome").getValue();e.TelefoneCelular=this.getView().byId("inputTelefoneCelular").getValue();e.TelefoneContato=this.getView().byId("inputTelefoneContato").getValue();e.CelularCorporativo=this.getView().byId("inputCelularCorporativo").getValue();e.EmailParticular=this.getView().byId("inputEmailParticular").getValue();e.EmailCorporativo=this.getView().byId("inputEmailCorporativo").getValue();e.Rua=this.getView().byId("inputRua").getValue();e.Numero=this.getView().byId("inputNumero").getValue();e.Bairro=this.getView().byId("inputBairro").getValue();e.Complemento=this.getView().byId("inputComplemento").getValue();e.Cidade=this.getView().byId("inputCidade").getValue();e.Cep=this.getView().byId("inputCep").getValue();e.Estado=this.getView().byId("inputEstado").getValue();e.Pais=this.getView().byId("inputPais").getProperty("selectedKey");return e},onMessagePopoverPress:function(e){var t=e.getSource();this._getMessagePopover().then(function(e){e.openBy(t)})},_getMessagePopover:function(){var e=this.getView();if(!this._pMessagePopover){this._pMessagePopover=i.load({id:e.getId(),name:"zatualizacaocadastral.fragment.MessagePopover"}).then(function(t){e.addDependent(t);return t})}return this._pMessagePopover},onClearPress:function(){sap.ui.getCore().getMessageManager().removeAllMessages()},onValueHelpRequest:function(e){var t=e.getSource().getValue(),a=this.getView();if(!this._pValueHelpDialog){this._pValueHelpDialog=i.load({id:a.getId(),name:"zatualizacaocadastral.fragment.ValueHelpDialog",controller:this}).then(function(e){a.addDependent(e);return e})}this._pValueHelpDialog.then(function(e){e.getBinding("items").filter([new n("DescricaoPais",u.Contains,t)]);e.open(t)})},onValueHelpDialogSearch:function(e){var t=e.getParameter("value");var a=new n("DescricaoPais",u.Contains,t);e.getSource().getBinding("items").filter([a])},onValueHelpDialogClose:function(e){var t,a=e.getParameter("selectedItem");e.getSource().getBinding("items").filter([]);if(!a){return}t=a.getDescription();this.byId("inputPais").setSelectedKey(t);this.byId("selectedKeyIndicator").setText(t)},onSuggestionItemSelected:function(e){var t=e.getParameter("selectedItem");var a=t?t.getKey():"";this.byId("selectedKeyIndicator").setText(a)}})});